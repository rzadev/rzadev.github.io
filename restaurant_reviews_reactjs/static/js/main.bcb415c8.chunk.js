(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{12:function(e,t,a){e.exports=a(27)},18:function(e,t,a){},19:function(e,t,a){},24:function(e,t,a){},25:function(e,t,a){},26:function(e){e.exports=[{place_id:"Place1",name:"Dapur Solo Lunch Box",vicinity:"Local JSON file",geometry:{location:{lat:-6.2912966,lng:106.7942293}},rating:4.7,user_ratings_total:3,reviews:[{rating:4,text:"Layanannya cepat, order buat jam 8. Tapi 7.30 udah siap. Meski saat itu gue gak terburu-buru. Menurut reviewer lain, Dapur Solo Lunch Box selalu siap buat acara dadakan. Tampaknya itu nyata."},{rating:5,text:"Sangat mudah dijangkau dari jalan raya"},{rating:5,text:"Helpful staff"}]},{place_id:"Place2",name:"Warung Nasi Bude Bambang",vicinity:"Local JSON file",geometry:{location:{lat:-6.290538,lng:106.7937508}},rating:4.3,user_ratings_total:3,reviews:[{rating:5,text:"Tempatnya enak buat ngobrol dan ngopi... Bude nya ramah..makana ya maknyus..."},{rating:4,text:"Enak"},{rating:4,text:"Good service"}]}]},27:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),r=a(8),s=a.n(r),o=a(1),c=a(2),l=a(4),u=a(3),m=a(5);a(18);function d(e){return"https://maps.googleapis.com/maps/api/streetview?size=300x300&location="+e.lat+","+e.lng+"&heading=151.78&pitch=-0.76&key=AIzaSyBdfaGvQ20-Yvwx7FUtPqfvC2jrDHDGlxY"}a(19);var p=a(9),v=a.n(p),f=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).onReviewSubmit=function(e){var t={};e.target.childNodes.forEach(function(e){"TEXTAREA"!==e.tagName&&"SELECT"!==e.tagName||(t[e.name]=e.value)}),a.props.places.forEach(function(a){if(e.target.id===a.place_id){if("Choose Rating"===t.rating)return alert("Please select a rating for the restaurant on the sidebar"),!1;if(""===t.feedback)return alert("Please write a review for the restaurant on the sidebar"),!1;var n=a.rating*a.user_ratings_total+parseInt(t.rating);t.rating>=0&&""!==t.feedback&&(t.id=a.place_id,t.position=a.geometry.location,a.user_ratings_total++),a.rating=Math.round(n/a.user_ratings_total*10)/10}});var n=a.state.addReview.slice();n.push(t),a.setState({addReview:n},function(){a.props.onReviewSubmit(a.state.addReview)}),e.preventDefault(),a.clearInput(e)},a.clearInput=function(e){e.target.childNodes.forEach(function(e){"TEXTAREA"===e.tagName&&(e.value=null),"SELECT"===e.tagName&&(e.value="Choose Rating")})},a.state={addReview:[]},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return i.a.createElement("div",{id:"right-panel"},i.a.createElement("div",{className:"right-panel-container"},i.a.createElement("div",{className:"restaurantsFilter"},this.props.children),i.a.createElement("div",{id:"places"},this.props.places.map(function(t){return i.a.createElement("div",{key:t.place_id,className:"restaurants",onClick:function(){e.props.listItemClick(t)}},i.a.createElement("div",{className:"restaurantName"}," ",t.name," "),i.a.createElement("div",{className:"starRating"},i.a.createElement("div",{className:"numberRating"},t.rating),i.a.createElement(v.a,{name:"rating",starColor:"#ffb400",emptyStarColor:"#ffb400",value:t.rating,renderStarIcon:function(e,t){return i.a.createElement("span",null,i.a.createElement("i",{className:e<=t?"fas fa-star":"far fa-star"}))},renderStarIconHalf:function(){return i.a.createElement("span",null,i.a.createElement("span",{style:{position:"absolute"}},i.a.createElement("i",{className:"far fa-star"})),i.a.createElement("span",null,i.a.createElement("i",{className:"fas fa-star-half"})))}}),i.a.createElement("div",{className:"userRatingsTotal"},"(",t.user_ratings_total,")")),i.a.createElement("div",{className:"placeAddress"},t.vicinity),i.a.createElement("div",{className:"addReview"},i.a.createElement("form",{onSubmit:e.onReviewSubmit,id:t.place_id},i.a.createElement("select",{className:"ratingForm__input ratingForm__input--select",id:"chooseRating",name:"rating",required:!0},i.a.createElement("option",{value:"Choose Rating",autoFocus:!0},"Choose Rating"),i.a.createElement("option",{value:"0"},"0"),i.a.createElement("option",{value:"1"},"1"),i.a.createElement("option",{value:"2"},"2"),i.a.createElement("option",{value:"3"},"3"),i.a.createElement("option",{value:"4"},"4"),i.a.createElement("option",{value:"5"},"5")),i.a.createElement("textarea",{type:"text",className:"ratingForm__input ratingForm__input--textarea",id:"feedback",name:"feedback",placeholder:"Write your review"}),i.a.createElement("input",{type:"submit",value:"Submit",id:t.place_id}))))}))))}}]),t}(n.Component),g=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).onFormSubmit=function(e){e.preventDefault(),a.props.onFormSubmit(a.state.ratings)},a.state={ratings:""},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:"filterLabel"},i.a.createElement("form",{onSubmit:this.onFormSubmit},i.a.createElement("label",{htmlFor:"selectRating"},"Rating at least:"),i.a.createElement("select",{id:"selectRating",value:this.state.ratings,onChange:function(t){return e.setState({ratings:t.target.value})}},i.a.createElement("option",{value:"0.0"},"Any rating"),i.a.createElement("option",{value:"2.0"},"2.0"),i.a.createElement("option",{value:"2.5"},"2.5"),i.a.createElement("option",{value:"3.0"},"3.0"),i.a.createElement("option",{value:"3.5"},"3.5"),i.a.createElement("option",{value:"4.0"},"4.0"),i.a.createElement("option",{value:"4.5"},"4.5")),i.a.createElement("input",{type:"submit",value:"Submit"})))}}]),t}(n.Component),w=a(10),h=a(11),b=a(6),R=(a(24),function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).onChangeInput=function(e){var t=e.target,n=t.name,i=t.value;a.setState(Object(b.a)({},n,i),function(){a.props.newRestaurantName(a.state.name),a.props.newRestaurantAddress(a.state.address),a.props.newRestaurantRating(a.state.rating),a.props.newRestaurantFeedback(a.state.feedback)})},a.newSubmit=function(e){e.preventDefault(),a.setState(Object.assign(a.state.newRestaurant,{name:a.state.name,address:a.state.address,rating:a.state.rating,feedback:a.state.feedback}),function(){a.addRestaurant()}),a.handleSubmit()},a.addRestaurant=function(){var e=Object(h.a)(a.state.newRestaurantList);e.push(Object(w.a)({},a.state.newRestaurant)),a.setState({newRestaurantList:e},function(){a.props.newSubmit(a.state.newRestaurantList),a.clearInput()})},a.clearInput=function(){a.setState({name:"",address:"",rating:"Choose Rating",feedback:""}),a.setState(Object.assign(a.state.newRestaurant,{name:"",address:"",rating:"",feedback:""}))},a.handleSubmit=function(){document.getElementById("addRestaurant").style.display="none"},a.state={name:"",address:"",rating:"",feedback:"",newRestaurant:{},newRestaurantList:[]},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement("div",{id:"addRestaurant"},i.a.createElement("h4",null,"Add a New Restaurant"),i.a.createElement("form",{className:"contactForm",onSubmit:this.newSubmit},i.a.createElement("input",{type:"text",className:"contactForm__input contactForm__input--text",id:"name",name:"name",value:this.state.name,onChange:this.onChangeInput,placeholder:"Restaurant Name",required:!0}),i.a.createElement("textarea",{type:"text",className:"contactForm__input contactForm__input--textarea",id:"address",name:"address",value:this.state.address,onChange:this.onChangeInput,placeholder:"Restaurant Address",required:!0}),i.a.createElement("select",{className:"contactForm__input contactForm__input--select",id:"rating",name:"rating",value:this.state.rating,onChange:this.onChangeInput,required:!0},i.a.createElement("option",{value:"",autoFocus:!0},"Choose Rating"),i.a.createElement("option",{value:"0"},"0"),i.a.createElement("option",{value:"1"},"1"),i.a.createElement("option",{value:"2"},"2"),i.a.createElement("option",{value:"3"},"3"),i.a.createElement("option",{value:"4"},"4"),i.a.createElement("option",{value:"5"},"5")),i.a.createElement("textarea",{type:"text",className:"contactForm__input contactForm__input--textarea",id:"feedback",name:"feedback",value:this.state.feedback,onChange:this.onChangeInput,placeholder:"Write Your feedback",required:!0}),i.a.createElement("button",{className:"contactForm__button",type:"submit",onSubmit:this.handleSubmit},"Submit"))))}}]),t}(n.Component)),E=(a(25),function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(i)))).detectEvent=function(){var e=document.querySelector(".closeIcon"),t=document.querySelector("#right-panel");e.classList.toggle("change"),""===t.style.display||"block"===t.style.display?t.style.display="none":t.style.display="block"},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement("div",{id:"header"},"Restaurants Review"),i.a.createElement("div",{className:"closeIcon",onClick:this.detectEvent},i.a.createElement("div",{className:"bar1"}),i.a.createElement("div",{className:"bar2"}),i.a.createElement("div",{className:"bar3"})))}}]),t}(n.Component)),y=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).onFormSubmit=function(e){var t=Number(e),n=a.state.places.filter(function(e){return e.rating>=t});a.setState({filteredPlaces:n}),a.state.filteredPlaces.forEach(function(e){a.markers.forEach(function(a){e.place_id===a.id&&(a.rating=e.rating),a.rating>=t?a.setVisible(!0):0===t?a.setVisible(!0):a.setVisible(!1)})})},a.listItemClick=function(e){var t=a.markers.filter(function(t){return t.id===e.place_id})[0];a.infowindow.setContent(t.title),a.infowindow.open(a.map,t)},a.newRestaurantName=function(e){a.setState({newRestaurantName:e},function(){})},a.newRestaurantAddress=function(e){a.setState({newRestaurantAddress:e},function(){})},a.newRestaurantRating=function(e){a.setState({newRestaurantRating:e},function(){})},a.newRestaurantFeedback=function(e){a.setState({newRestaurantFeedback:e},function(){})},a.newSubmit=function(e){var t={geometry:{},reviews:{}};a.newMarkers.forEach(function(e){t.position=e.position,t.geometry.location=e.position}),e.forEach(function(e){t.place_id=a.state.randomID,t.name=e.name,t.vicinity=e.address,t.rating=parseInt(e.rating),t.reviews.rating=parseInt(e.rating),t.reviews.text=e.feedback,t.user_ratings_total=1}),a.places.push(t);var n=a.state.newMarkersArr.slice();n.push(t),a.setState({newMarkersArr:n},function(){})},a.onReviewSubmit=function(e){var t={};e.forEach(function(e){t.id=e.id,t.position=e.position,t.rating=e.rating,t.feedback=e.feedback});var n=a.state.newReviews.slice();n.push(t),a.setState({newReviews:n},function(){})},a.state={lat:null,lon:null,places:[],placeReviews:{},localPlaceReviews:{},filteredPlaces:[],newReviewList:[],newMarkersArr:[],newReviews:[],newReviewsNewRestaurants:[],newRestaurantName:"",newRestaurantAddress:"",newRestaurantRating:"",newRestaurantFeedback:"",currentClickLocation:null,randomID:""},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=new Promise(function(e,t){window.resolveGoogleMapsPromise=function(){e(window.google),delete window.resolveGoogleMapsPromise};var a=document.createElement("script");a.src="https://maps.googleapis.com/maps/api/js?libraries=places&key=".concat("AIzaSyBdfaGvQ20-Yvwx7FUtPqfvC2jrDHDGlxY","&callback=resolveGoogleMapsPromise"),a.async=!0,document.body.appendChild(a)}),n=a(26);window.navigator.geolocation.getCurrentPosition(function(t){return e.setState({lat:parseFloat(t.coords.latitude),lon:parseFloat(t.coords.longitude)})},function(e){return console.log(e)}),Promise.all([t]).then(function(t){var a=t[0];e.google=a,e.places=[],e.markers=[],e.placeReviewsObj={},e.localPlaceReviewsObj={},e.currentPos=new a.maps.LatLng(e.state.lat,e.state.lon),e.infowindow=new a.maps.InfoWindow({maxWidth:450}),e.results=[],e.newMarkers=[],e.newMarkersObj={},e.map=new a.maps.Map(document.getElementById("map"),{zoom:18,center:{lat:e.state.lat,lng:e.state.lon},styles:[{featureType:"poi",stylers:[{visibility:"off"}]}]});var i=new a.maps.places.PlacesService(e.map),r={url:"https://cdn1.imggmi.com/uploads/2019/10/7/51efdca769118eae5795ee40094b51a8-full.png",size:new a.maps.Size(71,71),origin:new a.maps.Point(0,0),anchor:new a.maps.Point(17,34),scaledSize:new a.maps.Size(25,25)};!function(t){for(var a=0;a<t.length;a++)e.places.push(t[a]);t.forEach(function(t){var a=t.place_id,n=t.reviews;for(var i in t)e.localPlaceReviewsObj[a]=n;e.setState({localPlaceReviews:e.localPlaceReviewsObj})})}(n),i.nearbySearch({location:e.currentPos,radius:"150",type:["restaurant"]},function(t,n){if("OK"===n){t.forEach(function(t){void 0!==t.rating&&e.results.push(t)});for(var r=0;r<e.results.length;r++){var s={placeId:e.results[r].place_id,fields:["geometry","name","place_id","rating","reviews","user_ratings_total","vicinity"]};i.getDetails(s,function(t,n){if(n===a.maps.places.PlacesServiceStatus.OK){console.log(t);var i=t.place_id,r=t.reviews;for(var s in t)e.placeReviewsObj[i]=r;e.setState({placeReviews:e.placeReviewsObj})}})}c(e.results)}}),a.maps.event.addListener(e.map,"click",function(t){var a=document.getElementById("addRestaurant");e.setState({randomID:"_"+Math.random().toString(36).substr(2,9)},function(){}),""===a.style.display||"none"===a.style.display?(a.style.display="block",o(t.latLng),e.setState({currentClickLocation:t.latLng},function(){})):a.style.display="none"}),document.querySelector(".contactForm__button").addEventListener("click",function(){""!==e.state.newRestaurantName&&""!==e.state.newRestaurantAddress&&e.state.newRestaurantRating>=0&&""!==e.state.newRestaurantFeedback&&s()});var s=function(){var t=new a.maps.Marker({map:e.map,id:e.state.randomID,position:e.state.currentClickLocation,lat:e.state.currentClickLocation.lat(),lng:e.state.currentClickLocation.lng(),animation:a.maps.Animation.DROP,title:e.state.newRestaurantName,rating:parseInt(e.state.newRestaurantRating),icon:r});e.markers.push(t),a.maps.event.addListener(t,"click",function(){var a=function(a){a=t.position;var n=[];return e.state.newMarkersArr.forEach(function(e){e.position===a&&n.push(e)}),n}(),n=function(a){a=t.position;var n=[];return e.state.newReviews.forEach(function(e){e.position===a&&n.push(e)}),n}(),i='\n              <div class="reviewBox">\n              <h4>'.concat(t.title,'</h4>\n                <div class="reviewText">').concat(a.map(function(e){return"<p>Rating: "+e.reviews.rating+'</p><p class="text">Review: '+e.reviews.text+"</p>"}).join(""),'\n                  <div class="reviewNewText">').concat(n.map(function(e){return"<p>Rating: "+e.rating+'</p><p class="text">Review: '+e.feedback+"</p>"}).join(""),'\n                </div>\n                <img class="streetview" src=').concat(d(t),' alt="Streetview"/>\n              </div>');e.infowindow.setContent(i),e.infowindow.open(e.map,t)})},o=function(t){var n=new a.maps.Marker({position:t,map:e.map,visible:!1});e.newMarkers.push(n)},c=function(t){var n=!0,i=!1,s=void 0;try{for(var o,c=function(){var t=o.value,n=new a.maps.Marker({map:e.map,id:t.place_id,lat:t.geometry.location.lat(),lng:t.geometry.location.lng(),position:t.geometry.location,icon:r,title:t.name,animation:a.maps.Animation.DROP,rating:t.rating});e.places.push(t),e.markers.push(n),e.setState({places:e.places}),e.setState({filteredPlaces:e.places}),n.addListener("click",function(){null!==n.getAnimation()?n.setAnimation(null):n.setAnimation(a.maps.Animation.BOUNCE),setTimeout(function(){n.setAnimation(null)},1500)}),a.maps.event.addListener(n,"click",function(){var t=function(t){t=n.id;var a={};for(var i in e.state.placeReviews)if(t.indexOf(i)>-1)return a[i]=e.state.placeReviews[i],a}()[n.id],a=function(t){t=n.id;var a=[];return e.state.newReviews.forEach(function(e){e.id===t&&a.push(e)}),a}(),i='\n                <div class="reviewBox">\n                  <h4>'.concat(n.title,'</h4>    \n                  <div class="reviewText">').concat(t.map(function(e){return"<h5>Name: "+e.author_name+"</h5><p>Rating: "+e.rating+'</p><p class="text">Review: '+e.text+"</p>"}).join(""),'\n                  <div class="reviewNewText">').concat(a.map(function(e){return"<p>Rating: "+e.rating+'</p><p class="text">Review: '+e.feedback+"</p>"}).join(""),'\n                  </div>  \n                  </div>\n                  <img class="streetview" src=').concat(d(n),' alt="Streetview"/>\n                </div>');e.infowindow.setContent(i),e.infowindow.open(e.map,n)})},l=t[Symbol.iterator]();!(n=(o=l.next()).done);n=!0)c()}catch(u){i=!0,s=u}finally{try{n||null==l.return||l.return()}finally{if(i)throw s}}};!function(t){var n=!0,i=!1,s=void 0;try{for(var o,c=function(){var t=o.value,n=new a.maps.Marker({map:e.map,id:t.place_id,lat:t.geometry.location.lat,lng:t.geometry.location.lng,position:t.geometry.location,title:t.name,animation:a.maps.Animation.DROP,rating:t.rating,icon:r});e.markers.push(n),a.maps.event.addListener(n,"click",function(){var t=function(t){t=n.id;var a={};for(var i in e.state.localPlaceReviews)if(t.indexOf(i)>-1)return a[i]=e.state.localPlaceReviews[i],a}()[n.id],a=function(t){t=n.id;var a=[];return e.state.newReviews.forEach(function(e){e.id===t&&a.push(e)}),a}(),i='\n                <div class="reviewBox">\n                  <h4>'.concat(n.title,'</h4>\n                  <div class="reviewText">').concat(t.map(function(e){return"<p>Rating: "+e.rating+'</p><p class="text">Review: '+e.text+"</p>"}).join(""),'\n                    <div class="reviewNewText">').concat(a.map(function(e){return"<p>Rating: "+e.rating+'</p><p class="text">Review: '+e.feedback+"</p>"}).join(""),'\n                    </div>\n                  </div>\n                  <img class="streetview" src=').concat(d(n),' alt="Streetview"/>\n                </div>');e.infowindow.setContent(i),e.infowindow.open(e.map,n)})},l=t[Symbol.iterator]();!(n=(o=l.next()).done);n=!0)c()}catch(u){i=!0,s=u}finally{try{n||null==l.return||l.return()}finally{if(i)throw s}}}(n);var l={lat:e.state.lat,lng:e.state.lon};new a.maps.Marker({map:e.map,position:l,animation:a.maps.Animation.DROP});!function(){var t={};e.state.places.forEach(function(e){var a=e.place_id;t[a]=e.rating});var a=function(e){var a=t[e]/5*100,n="".concat(10*Math.round(a/10),"%");document.querySelectorAll(".".concat(e," .stars-inner")).forEach(function(e){e.style.width=n})};for(var n in t)a(n)}()}).catch(function(e){console.log(e),alert("Error loading page...")})}},{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement(E,null),i.a.createElement("div",{id:"map"}),i.a.createElement(R,{newSubmit:this.newSubmit,newRestaurantName:this.newRestaurantName,newRestaurantAddress:this.newRestaurantAddress,newRestaurantRating:this.newRestaurantRating,newRestaurantFeedback:this.newRestaurantFeedback}),i.a.createElement(f,{places:this.state.filteredPlaces,onReviewSubmit:this.onReviewSubmit,listItemClick:this.listItemClick},i.a.createElement(g,{onFormSubmit:this.onFormSubmit})))}}]),t}(n.Component);s.a.render(i.a.createElement(y,null),document.querySelector("#root"))}},[[12,1,2]]]);
//# sourceMappingURL=main.bcb415c8.chunk.js.map